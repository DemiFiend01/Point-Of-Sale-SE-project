<!DOCTYPE html>
<html>
<body>

<h1>Manage menu</h1>

<form method="post">
    {% csrf_token %}
    <button name="action" value="go_back">Go back</button>
</form>
<form method="post">
    {% csrf_token %}
    
    <table border="3">
        <tr>
            <th>Select</th>
            <th>Name</th>
            <th>Price</th>
            <th>Course</th>
            <th>Active?</th>
        </tr>

        {% for item in menu_items %}
        <tr>
            <td>
                <input
                    type="radio"
                    name="selected_item_id"
                    value="{{ item.m_id }}"
                    required
                >
            </td>
            <td>{{ item.name }}</td>
            <td>{{ item.price }}</td>
            <td>{{ item.course }}</td>
            <td>{{ item.active }}</td>
        </tr>
        {% endfor %}
    </table>
    <button type="button" onclick="document.getElementById('addDialog').showModal()">Add menu item</button>
    <button type="submit" name="action" value="edit">Edit</button>
    <button name="action" value="delete">Delete</button>
    
</form>
    
</body>
<dialog id="addDialog">
    <form method="post">
        {% csrf_token %}

        <h3>Add menu item</h3>
        <label>Name:<input type="text" name="name"></label>
        <br>
        <label>Price:<input type="number" step="1" name="price" value="1"> PLN</label>
        <br>
        <label>Minimal preparation time:<input type="number" step="1" name="min_prep_time" value="1"> min.</label>
        <br>
        <label>Active?<input type="checkbox" name="active" checked ></label>
        <br>
        <label>Course:<input type="text" name="course"></label>
        <br>
        <label>Tax:<input type="number" step="0.1" name="tax" value="8">%</label>
        <br>
        <button type="submit" name="action" value="add">Save</button>
        <button formmethod="dialog">Cancel</button>
        
    </form>
</dialog>
{% if error %}
    <p style="color:red">{{error}}</p>
{% endif %}
{% if success %}
    <p style="color:greenyellow">{{success}}</p>
{% endif %}
</html>
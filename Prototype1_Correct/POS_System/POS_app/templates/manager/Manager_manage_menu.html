{% extends "layouts/app_base.html" %}

{% block title %}Manager â€¢ POS{% endblock %}
{% block page_header %}Manage menu{% endblock %}

{% block content %}

<h1>Manage menu</h1>

<form method="post" class="mb-3">
    {% csrf_token %}
    <button name="action" value="go_back" class="btn btn-secondary">
        Go back
    </button>
</form>

<form method="post">
    {% csrf_token %}
    
    <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle">
            <thead class="table-light">
                <tr>
                    <th>Select</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Course</th>
                    <th>Active?</th>
                </tr>
            </thead>
            <tbody>
                {% for item in menu_items %}
                <tr>
                    <td>
                        <input
                            type="radio"
                            name="selected_item_id"
                            value="{{ item.m_id }}"
                            required
                        >
                    </td>
                    <td>{{ item.name }}</td>
                    <td>{{ item.price }}</td>
                    <td>{{ item.course }}</td>
                    <td>{{ item.active }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="mt-3 d-flex gap-2">
        <button type="button"
                class="btn btn-outline-primary"
                onclick="document.getElementById('addDialog').showModal()">
            Add menu item
        </button>

        <button type="submit" name="action" value="edit" class="btn btn-outline-warning">
            Edit
        </button>

        <button name="action" value="delete" class="btn btn-outline-danger">
            Delete
        </button>
    </div>
</form>

<dialog id="addDialog">
    <form method="post">
        {% csrf_token %}

        <h3>Add menu item</h3>

        <label>
            Name:
            <input type="text" name="name">
        </label>
        <br>

        <label>
            Price:
            <input type="number" step="1" name="price" value="1"> PLN
        </label>
        <br>

        <label>
            Minimal preparation time:
            <input type="number" step="1" name="prep_time_min" value="1"> min.
        </label>
        <br>

        <label>
            Active?
            <input type="checkbox" name="active" checked>
        </label>
        <br>

        <label>
            Course:
            <input type="text" name="course">
        </label>
        <br>

        <label>
            Tax:
            <input type="number" step="0.1" name="tax" value="8"> %
        </label>
        <br>

        <div class="mt-3 d-flex gap-2">
            <button type="submit" name="action" value="add" class="btn btn-primary">
                Save
            </button>
            <button formmethod="dialog" class="btn btn-secondary">
                Cancel
            </button>
        </div>
    </form>
</dialog>

{% if error %}
    <p class="text-danger mt-3">{{ error }}</p>
{% endif %}

{% if success %}
    <p class="text-success mt-3">{{ success }}</p>
{% endif %}

{% endblock %}
